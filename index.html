<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pr√©paration de Vol en Valais</title>
    <style>
        /* ================================== */
        /* COULEURS DE BASE (WHITE MODE - Mode sans classe .dark-mode) */
        /* ================================== */
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f7f7f7; /* Fond clair */
            color: #333;
            transition: background-color 0.3s, color 0.3s; /* Transition fluide */
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: background-color 0.3s, box-shadow 0.3s;
        }
        h1, h2, .foehn-diagram-box h4 {
            color: #0066cc;
            border-bottom: 2px solid #eee;
            padding-bottom: 10px;
            text-align: center;
        }
        /* NOUVEAU STYLE POUR CENTRER L'IFRAME WINDY */
        .windy-map-container {
            margin: 20px auto; /* Centre horizontalement (automargin) */
            width: 850px; /* Largeur de l'iframe */
            max-width: 100%; /* S'assurer qu'il s'adapte aux √©crans plus petits */
        }
        .windy-map-container iframe {
            display: block;
            width: 100%; /* L'iframe prend la largeur de son conteneur .windy-map-container */
            height: 450px; /* Hauteur d√©finie */
            border-radius: 5px;
        }
        /* MODIFICATION DU STYLE EXISTANT POUR CENTRER LES BOUTONS AVEC FLEXBOX */
        .general-links {
            display: flex; /* Active Flexbox */
            justify-content: center; /* Centre horizontalement les boutons */
            gap: 15px; /* Espacement entre les boutons */
            margin-bottom: 20px; /* Espace sous les boutons */
        }
        .general-links a {
            background-color: #0099cc;
            color: white;
            display: inline-block; /* Gard√© pour la compatibilit√© avec d'autres liens */
            padding: 10px 15px;
            /* margin-right: 15px; √âlimin√© car remplac√© par 'gap' dans .general-links */
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
        }
        .config-button {
            background-color: #f0f0f0;
            border: 2px solid #ccc;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, border-color 0.2s;
            font-size: 16px;
            font-weight: bold;
        }
        .config-button:hover {
            background-color: #e0e0e0;
        }
        .config-button.active {
            background-color: #4CAF50;
            color: white;
            border-color: #388E3C;
        }
        .widget-section {
            border: 1px solid #ddd;
            background-color: #fafafa;
        }
        .widget-box {
            background: white;
            border: 1px solid #eee;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
            padding: 15px; 
            border-radius: 4px;
        }
        .widget-placeholder {
            background-color: #e9e9e9;
            color: #666;
            min-height: 180px; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
            font-style: italic; 
            border-radius: 3px; 
            overflow: hidden; 
        }
        .widget-placeholder iframe { 
            width: 100%; 
            height: 150px; 
            border: none; 
        }
        /* Styles sp√©cifiques pour la Webcam */
        .webcam-box {
            grid-column: 1 / -1; /* Prend toute la largeur dans la grille */
            margin-top: 10px;
            margin-bottom: 10px;
        }
        .webcam-placeholder iframe {
            height: 350px; /* Plus grand pour une webcam */
        }
        
        /* Styles pour le Diagramme Profiwetter */
        .foehn-diagram-box {
            margin-top: 25px;
            padding: 15px;
            border-radius: 5px;
            background-color: #fff; 
            border: 1px solid #ddd;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
            grid-column: 1 / -1; /* Prend toute la largeur */
            text-align: center; /* Centre le contenu comme l'iframe Profiwetter */
        }
        .foehn-diagram-box iframe {
            width: 600px;
            height: 500px; 
            border: none;
            display: block;
            margin: 0 auto; /* Centre l'iframe Profiwetter √† l'int√©rieur de sa box */
        }

        /* ================================== */
        /* CSS DU MODE SOMBRE (.dark-mode)      */
        /* ================================== */
        body.dark-mode {
            background-color: #121212;
            color: #E0E0E0;
        }
        body.dark-mode .container {
            background: #1E1E1E;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
        }
        body.dark-mode h1, body.dark-mode h2 {
            color: #8AB4F8;
            border-bottom: 2px solid #333333;
        }
        body.dark-mode .general-links a {
            background-color: #00796B;
        }
        body.dark-mode .config-button {
            background-color: #333333;
            color: #CCCCCC;
            border: 2px solid #555555;
        }
        body.dark-mode .config-button:hover {
            background-color: #444444;
        }
        body.dark-mode .config-button.active {
            background-color: #1A73E8;
            border-color: #669DF6;
        }
        body.dark-mode .widget-section {
            border: 1px solid #333333;
            background-color: #282828;
        }
        body.dark-mode .widget-box {
            background: #1E1E1E;
            border: 1px solid #333333;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        body.dark-mode .widget-placeholder {
            background-color: #000000;
            color: #888;
        }
        body.dark-mode .foehn-diagram-box {
            background-color: #1E1E1E; 
            border: 1px solid #333333;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }
        body.dark-mode .foehn-diagram-box h4 {
            color: #8AB4F8;
            border-bottom: 2px solid #333333;
        }
        /* BOUTON DE BASCULE (HAUT DROITE) */
        #dark-mode-toggle {
            position: fixed; 
            top: 20px;
            right: 20px;
            padding: 10px 15px;
            background-color: #333;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            transition: background-color 0.3s;
        }
        #dark-mode-toggle:hover {
            background-color: #555;
        }
        
        /* Styles de positionnement */
        .config-buttons { display: flex; gap: 15px; flex-wrap: wrap; margin-bottom: 20px; }
        .config-button { padding: 12px 20px; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; }
        .widget-section { display: none; padding: 20px; border-radius: 5px; margin-top: 20px; }
        .widget-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        
        /* Style pour la description */
        .config-description {
            margin-bottom: 20px;
            padding: 10px;
            border-left: 5px solid #0099cc; /* Barre de couleur pour distinguer */
            background-color: #eef;
            border-radius: 0 4px 4px 0;
            line-height: 1.6;
        }
        body.dark-mode .config-description {
            border-left: 5px solid #8AB4F8;
            background-color: #242424;
        }
        /* Style sp√©cifique pour la mise en garde Foehn */
        .foehn-warning {
            border-left-color: #CC0000; /* Rouge vif pour le danger */
            background-color: #ffebeb;
        }
        body.dark-mode .foehn-warning {
            border-left-color: #FF6B6B;
            background-color: #3d1c1c;
        }
        /* Style sp√©cifique pour la mise en garde Vent Nord */
        .nord-warning {
            border-left-color: #FF9900; /* Orange pour prudence */
            background-color: #fff8e8;
        }
        body.dark-mode .nord-warning {
            border-left-color: #FFB74D;
            background-color: #3d341c;
        }
    </style>
</head>
<body class="dark-mode"> 
    <button id="dark-mode-toggle">D√©sactiver Mode Sombre</button>

    <div class="container">
        <h1>üå¨Ô∏è Pr√©paration de Vol en Valais</h1>

        <div class="section-header">
            <h2>1. üåê Situation G√©n√©rale</h2>
            <div class="windy-map-container">
                <iframe width="850" height="450" src="https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=mm&metricTemp=¬∞C&metricWind=km/h&zoom=3&overlay=pressure&product=ecmwf&level=surface&lat=43.835&lon=19.688&pressure=true&message=true" frameborder="0"></iframe>
            </div>
            <div class="general-links">
                <a href="https://www.meteosuisse.admin.ch/services-et-publications/applications/situation-generale.html#tab=general-situation-map" target="_blank">Frontologie Meteosuisse</a>
                <a href="https://xctherm.com/icon" target="_blank">Pr√©visions Locales XC Therm</a>
            </div>
        </div>

        <hr>

        <div class="section-header">
            <h2>2. üñ±Ô∏è S√©lectionner la Configuration M√©t√©o</h2>
            <p>Cliquez sur la situation pr√©vue pour afficher les informations pertinentes √† la pr√©paration de vol.</p>
            <div class="config-buttons">
                <button class="config-button" data-config="ouest">üå¨Ô∏è Vent d'Ouest/Sud-Ouest/Nord-Ouest</button>
                <button class="config-button" data-config="bise">üß≠ Vent d'Est/Nord-Est (Bise)</button>
                <button class="config-button" data-config="sud">üî• Vent du Sud/Sud-Est (Foehn)</button>
                <button class="config-button" data-config="nord">üí® Vent du Nord (Foehn)</button>
                <button class="config-button" data-config="anticyclone">‚òÄÔ∏è Conditions Anticycloniques</button>
                <button class="config-button" data-config="marais">‚òÅÔ∏è Marais Barom√©trique</button>
            </div>
        </div>
        
        <hr>

        <div class="section-header">
            <h2>3. üí® Informations pour pr√©paration avant vol, et surveillance pendant journ√©e de vol</h2>
        </div>

        <div id="widgets-ouest" class="widget-section">
            <h3>Balises √† surveiller par vent de secteur Ouest</h3>
            <div class="config-description">
                <p>‚ö†Ô∏è Souvent venteux et turbulent, surveiller les variations de la force du vent avec les balises situ√©es a l'ouest.</p>
                <p>Comme le vent du S-W ne subit en principe pas d‚Äôeffet de barrage et que les Alpes plus √† l‚Äôouest du Valais nous prot√®gent de ce vent, il est relativement peu dangereux. <span style="color: red; text-decoration: underline;"> A moins de 40 km/h en rafale sur les sommets</span>, vol g√©n√©ralement possible en Valais central, surtout dans les basses couches. </p>
                <p>A noter que cette orientation de vent est souvent plus marqu√©e rive gauche (Vercorin, Nendaz) que rive droite.</p>
            </div>
            <div class="widget-grid">
                <div class="widget-box">
                    <h4>Diablerets</h4>
                    <div class="widget-placeholder">
                        <iframe id="diablerets-ouest" width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/DIA?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Mol√©son</h4>
                    <div class="widget-placeholder">
                        <iframe src="https://www.spotair.mobi/widget/wind/meteoswiss/MLS?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Attelas (Verbier)</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/ATT?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
            </div>
        </div>

        <div id="widgets-bise" class="widget-section">
            <h3>Balises a surveiller par vent d'Est/Nord-Est</h3>
            <div class="config-description">
                <p>La Bise vient du Nord-Est et peut √™tre tr√®s forte en cr√™te.</p>
                <p>‚ö†Ô∏è Si bise tr√®s marqu√©e risque de se retrouver sous le vent en rive droite.</p>
                <p>Risque de renforcer le vent de vall√©e en √©t√©.</p>
                <p>ATTENTION si vent bascule en Nord en cours de journ√©e (risque de foehn)</p>
            </div>
            <div class="widget-grid">
                <div class="widget-box">
                    <h4>Grimsel</h4>
                    <div class="widget-placeholder">
                        <iframe src="https://www.spotair.mobi/widget/wind/meteoswiss/GRH?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Jungfraujoch</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/JUN?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Diablerets (Exposition Nord-Est)</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/DIA?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
            </div>
            <div class="foehn-diagram-box">
                <h4>Difference pression Est/Ouest</h4>
                <iframe src="https://profiwetter.ch/index.php?show=wind_bise&lang=fr" title="Difference de pression Est/Ouest" allowfullscreen></iframe>
            </div>
        </div>

        <div id="widgets-sud" class="widget-section">
            <h3>Balises a surveiller en cas de vent du Sud/Sud-Est (Foehn du Sud)</h3>
            
            <div class="config-description foehn-warning">
                <p style="font-size: 1.2em; font-weight: bold; color: #CC0000;">üö® DANGER Foehn !</p>
                <p style="font-weight: bold; margin-top: 10px;">Crit√®res de reconnaissance (parfois un seul critere suffit!) :</p>
                <ul>
                    <li>Diff√©rence de pression Nord/Sud (voir graphique).</li>
                    <li>Fort vent Sud / Sud-Est aux balises d'altitude.</li>
                    <li>Barrage de Foehn au sud des Alpes (voir webcam Pas de Maimbr√©).</li>
                    <li>Nuages lenticulaires sur les sommets du Sud des Alpes</li>
                </ul>
                <p style="margin-top: 10px;">Balises m√©t√©o √† surveiller pour controler l'avancement du Foehn: G√ºtsch, Bellalui, Montana, Vi√®ge.</p>
                
                <hr>

                <p style="font-weight: bold;">Cette situation n√©cessite une grande PRUDENCE, que l‚Äôon vole en rive droite ou gauche de la vall√©e du Rh√¥ne ! Elle est trop souvent sous-estim√©e √† Vercorin et Verbier et peut clairement √™tre mortelle m√™me pour un pilote aguerri!</p>
                
                <p>‚ö†Ô∏è D√®s que G√ºtsch d√©passe 35 km/h en rafale, foehn probable en rive droite.</p>
                
                <p>L‚Äôarriv√©e du foehn se fait **EN PRINCIPE** de haut en bas (Bellalui > Montana > Vi√®ge), mais pas tout le temps car d√©pend du lac d‚Äôair froid.</p>
                <p style="font-weight: bold;">Plut√¥t privil√©gier la rive gauche ou Verbier, et ne pas h√©siter √† renoncer en cas de doute !</p>
                
                <p style="font-weight: bold; color: #CC0000;">R√®gle Vercorin : STOP VOL si Vi√®ge d√©passe 30 km/h Est en rafale. Attention, cela peut se produire en quelques minutes seulement !</p>
            </div>
            <div class="widget-grid">
                <div class="widget-box">
                    <h4>Jungfraujoch</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/JUN?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Gutsch</h4>
                    <div class="widget-placeholder">
                        <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/GUE?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Diablerets</h4>
                    <div class="widget-placeholder">
                        <iframe id="diablerets-sud" width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/DIA?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Bellalui (Crans-Montana)</h4>
                    <div class="widget-placeholder">
                       <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/holfuy/1147?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Montana (Altitude Moyenne)</h4>
                    <div class="widget-placeholder">
                        <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/MVE?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Vi√®ge (Fond de Vall√©e Est Valais)</h4>
                    <div class="widget-placeholder">
                        <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/VIS?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
            </div>
            <div class="widget-box webcam-box">
                <h4>üëÄ Webcam Pas de Maimbr√© (Anz√®re)</h4>
                <p>V√©rifier l'apparition du mur de Foehn sur les cr√™tes Ouest du Valais.</p>
                <div class="widget-placeholder webcam-placeholder">
                    <iframe src="https://www.skaping.com/anzere/pas-de-maimbre" width="100%" height="350px" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
            <div class="foehn-diagram-box">
                <h4>Difference pression Nord/Sud</h4>
                <iframe src="https://profiwetter.ch/showdiagram.php?show=wind_foehn_ch&lang=fr" title="Difference pression Nord/Sud" allowfullscreen></iframe>
            </div>
        </div>
        
        <div id="widgets-nord" class="widget-section">
            <h3>Balises Cruciales pour Vent du Nord/Nord-Ouest</h3>
            
            <div class="config-description nord-warning">
                <p style="font-size: 1.2em; font-weight: bold; color: #FF9900;">‚ö†Ô∏è PRUDENCE Vent du Nord !</p>
                <p style="font-weight: bold; margin-top: 10px;">Crit√®res de reconnaissance : (parfois 1 seul suffit!)</p>
                <ul>
                    <li>Diff√©rence de pression (voir graphique).</li>
                    <li>Vent du Nord dominant aux balises d'altitude.</li>
                    <li>Barrage de Foehn Nord : Sanetsch, Rawyl, Gemmi (voir webcam).</li>
                </ul>
                <p style="margin-top: 10px;">Balises m√©t√©o √† surveiller : Jungfraujoch, Diablerets, Grimsel, G√ºtsch.</p>
                
                <hr>

                <p style="font-weight: bold;">Cette situation n√©cessite une grande PRUDENCE, particuli√®rement lorsque l‚Äôon vole en rive droite de la vall√©e du Rh√¥ne (risque de turbulences sous le vent).</p>
                
                <p>D√®s que les balises en altitude d√©passent 30 km/h en rafale, l‚Äô√©valuation de la situation n√©cessite de l‚Äôexp√©rience.</p>
                
                <p>Attention : Les balises d‚ÄôAnz√®re et Bellalui peuvent parfois √™tre sous le vent et afficher un vent du Sud (trompeur).</p>
                <p style="font-weight: bold;">Plut√¥t privil√©gier la rive gauche ou Verbier, et ne pas h√©siter √† renoncer en cas de doute !</p>
            </div>
            
            <div class="widget-grid">
               <div class="widget-box webcam-box">
                    <h4>üëÄ Webcam Nax</h4>
                    <p>V√©rifier pr√©sence barrage de foehn Sanetsch, Rawyl, Gemmi.</p>
                    <div class="widget-placeholder webcam-placeholder" style="background-color: #333; color: white; border-radius: 3px;">
                    <p style="margin: 10px;">Cliquez sur le lien ci-dessous pour voir la webcam en plein √©cran.</p>
                    <a href="https://nax.roundshot.com/mont-noble/#/" target="_blank" style="
                        display: inline-block;
                        background-color: #00796B; /* Couleur du lien en mode sombre */
                        color: white;
                        padding: 10px 15px;
                        margin: 15px;
                        text-decoration: none;
                        border-radius: 5px;
                        font-weight: bold;
                    ">Ouvrir la Webcam Nax (Nouvel Onglet)</a>
                <iframe src="https://nax.roundshot.com/mont-noble/#/" width="100%" height="50px" frameborder="0" style="display: none;"></iframe> 
    </div>
</div>

                <div class="widget-box">
                    <h4>Jungfraujoch</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/JUN?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Gutsch</h4>
                    <div class="widget-placeholder">
                        <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/GUE?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Diablerets</h4>
                    <div class="widget-placeholder">
                        <iframe id="diablerets-sud" width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/DIA?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Grimsel</h4>
                    <div class="widget-placeholder">
                        <iframe src="https://www.spotair.mobi/widget/wind/meteoswiss/GRH?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
            </div>
            <div class="foehn-diagram-box">
                <h4>Diagramme Profiwetter : Vent synoptique (Altitude) et Foehn</h4>
                <iframe src="https://profiwetter.ch/index.php?show=wind_foehn_ch&lang=fr" title="Diagramme Vent et Foehn Profiwetter Suisse" allowfullscreen></iframe>
            </div>
        </div>
        
        <div id="widgets-anticyclone" class="widget-section">
            <h3>Balises Cruciales pour Conditions Anticycloniques</h3>
            <div class="config-description">
                <p>Vent synoptique faible. Concentrez-vous sur les brises de vall√©e/pente et la base des nuages.</p>
            </div>
            <div class="widget-grid">
                <div class="widget-box">
                    <h4>Evionnaz (Brise de Vall√©e Bas-Valais)</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/EVI?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Sion (Force de la Brise du Rh√¥ne)</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/SIO?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Chalais (Vent Local Vall√©e Centrale)</h4>
                    <div class="widget-placeholder">
                        <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/holfuy/1086?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Montagnier (Brise de Pente Locale)</h4>
                    <div class="widget-placeholder">
                       <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/MOB?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="widgets-marais" class="widget-section">
            <h3>Balises Cruciales pour Marais Barom√©trique</h3>
            <div class="config-description">
                <p>Temps variable. Vent faible, facilite l'ascension des thermiques mais attention au risque de sur-d√©veloppement local (orages...).</p>
            </div>
            <div class="widget-grid">
                <div class="widget-box">
                    <h4>Evionnaz (Variabilit√© Bas-Valais)</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/EVI?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Sion (Variabilit√© du vent au sol)</h4>
                    <div class="widget-placeholder">
                        <iframe width="100%" height="150" frameborder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/SIO?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Chalais (Point de R√©f√©rence Central)</h4>
                    <div class="widget-placeholder">
                        <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/holfuy/1086?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
                <div class="widget-box">
                    <h4>Montagnier (Variabilit√© Altitude Moyenne)</h4>
                    <div class="widget-placeholder">
                        <iframe width="75" height="75" frameBorder="0" src="https://www.spotair.mobi/widget/wind/meteoswiss/MOB?mode=free_flight&unit=kmh&name=false&quadrant=true&windValues=true&dark=true"></iframe>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const buttons = document.querySelectorAll('.config-button');
            const widgetSections = document.querySelectorAll('.widget-section'); 
            const toggleButton = document.getElementById('dark-mode-toggle');
            const body = document.body;

            // D√©finir UNIQUEMENT les iframes SpotAir pour la bascule du mode sombre
            const spotAirIframes = document.querySelectorAll('.widget-placeholder iframe[src*="spotair"]');
            
            // Fonction pour basculer le mode (et l'enregistrer)
            function toggleDarkMode() {
                const isDarkMode = body.classList.toggle('dark-mode');
                
                toggleButton.textContent = isDarkMode ? 'D√©sactiver Mode Sombre' : 'Activer Mode Sombre';
                
                localStorage.setItem('darkMode', isDarkMode ? 'enabled' : 'disabled');

                // Mise √† jour de TOUTES les iframes SpotAir
                spotAirIframes.forEach(iframe => {
                    let src = iframe.src;
                    const newDarkParam = isDarkMode ? 'dark=true' : 'dark=false';
                    // Remplacer le param√®tre 'dark' dans l'URL de l'iframe
                    iframe.src = src.replace(/dark=(true|false)/, newDarkParam);
                });
            }
            
            // ===========================================
            // LOGIQUE D'INITIALISATION AU CHARGEMENT
            // ===========================================
            
            const storedPreference = localStorage.getItem('darkMode');
            
            // 1. Initialisation du mode sombre/clair
            if (storedPreference === 'disabled') {
                body.classList.remove('dark-mode');
                toggleButton.textContent = 'Activer Mode Sombre';
            } else {
                 body.classList.add('dark-mode');
                toggleButton.textContent = 'D√©sactiver Mode Sombre';
            }

            // 2. Initialiser les iframes SpotAir selon le mode actif final
            const isDarkInitial = body.classList.contains('dark-mode');
            spotAirIframes.forEach(iframe => {
                 if (iframe) {
                     let src = iframe.src;
                     const initialDarkParam = isDarkInitial ? 'dark=true' : 'dark=false';
                     iframe.src = src.replace(/dark=(true|false)/, initialDarkParam);
                 }
            });


            // √âcouteur pour le bouton de bascule du mode sombre
            toggleButton.addEventListener('click', toggleDarkMode);


            // 3. Logique de filtrage des balises
            buttons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetConfig = this.getAttribute('data-config');
                    
                    // Cacher toutes les sections
                    widgetSections.forEach(section => {
                        section.style.display = 'none';
                    });

                    // D√©sactiver tous les boutons
                    buttons.forEach(btn => {
                        btn.classList.remove('active');
                    });

                    // Afficher la section des widgets locaux
                    const targetSection = document.getElementById(`widgets-${targetConfig}`);
                    if (targetSection) {
                        targetSection.style.display = 'block';
                    }
                    
                    // Activer le bouton cliqu√©
                    this.classList.add('active');
                });
            });
            
            // 4. Masquer toutes les sections au chargement (par d√©faut)
            widgetSections.forEach(section => {
                section.style.display = 'none';
            });
        });
    </script>

</body>
</html>